<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head.ejs %>
</head>
<body class="container">
    <% include ../partials/header.ejs %>

    <main class="main">
        <div class="info-unit text-center">
            <% if (auth.success) { %>
                <p >Welcome!</p>
            <% } else { %>
                <p>You are not authorized! Please, <a href="/api/auth/login">Log in</a> or <a href="/api/auth/signup">Sign up</a>.</p>
            <% } %>


            <div class="carousel">
                <div class="carousel__nav">
                    <button class="carousel__nav-prev">
                        <i class="fa fa-2x fa-arrow-left" aria-hidden="true"></i>
                    </button>
                    <button class="carousel__nav-next">
                        <i class="fa fa-2x fa-arrow-right" aria-hidden="true"></i>
                    </button>
                </div>
                <ul class="carousel__content">
                    <li class="carousel__content-item">
                        <picture>
                            <source media="(max-width: 320px)"
                                    srcset="../../img_1_320.jpg 1x,
                                    ../../img_1_320_retina.jpg 2x">
                            <source media="(max-width: 1024px)"
                                    srcset="../../img_1_1024.jpg">
                            <source srcset="../../img_1_1440.jpg 1x,
                                    ../../img_1_1440_retina.jpg 2x">

                            <img src="../../img_1_1440.jpg" alt="">
                        </picture>

                    </li>
                    <li class="carousel__content-item">
                        <picture>
                            <source media="(max-width: 320px)"
                                    srcset="../../img_2_320.jpg 1x,
                                    ../../img_2_320_retina.jpg 2x">
                            <source media="(max-width: 1024px)"
                                    srcset="../../img_2_1024.jpg">
                            <source srcset="../../img_2_1440.jpg 1x,
                                    ../../img_2_1440_retina.jpg 2x">

                            <img src="../../img_2_1440.jpg" alt="">
                        </picture>
                    </li>
                    <li class="carousel__content-item">

                        <picture>
                            <source media="(max-width: 320px)"
                                    srcset="../../img_3_320.jpg 1x,
                                    ../../img_3_320_retina.jpg 2x">
                            <source media="(max-width: 1024px)"
                                    srcset="../../img_3_1024.jpg">
                            <source srcset="../../img_3_1440.jpg 1x,
                                    ../../img_3_1440_retina.jpg 2x">

                            <img src="../../img_3_1440.jpg" alt="">
                        </picture>
                    </li>
                </ul>
            </div>
        </div>
    </main>

    <% include ../partials/footer.ejs %>

    <script>
      (function() {
        'use strict';

        var box = document.querySelector('.carousel');
        var next = box.querySelector('.carousel__nav-next');
        var prev = box.querySelector('.carousel__nav-prev');
        var items = box.querySelectorAll('.carousel__content-item');
        var counter = 0;
        var amount = items.length;
        var current = items[0];
        box.classList.add('carousel--active');

        navigate(0);

        next.addEventListener('click', function() {
          navigate(1);
        }, false);

        prev.addEventListener('click', function() {
          navigate(-1);
        }, false);

        function navigate(direction) {
          current.classList.remove('carousel__content-item--current');
          counter = counter + direction;

          if (direction === -1 && counter < 0) {
            counter = amount - 1;
          }

          if (direction === 1 && !items[counter]) {
            counter = 0;
          }

          current = items[counter];
          current.classList.add('carousel__content-item--current');
        }

      })();
    </script>
</body>
</html>